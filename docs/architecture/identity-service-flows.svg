<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,3 L0,6 Z" fill="#1e1e1e" />
    </marker>
    <style>
      .box { fill: #ffffff; stroke: #1e1e1e; stroke-width: 2; rx: 8; ry: 8; }
      .title { font: 700 16px Inter, Arial, sans-serif; fill: #1e1e1e; }
      .label { font: 14px Inter, Arial, sans-serif; fill: #1e1e1e; }
      .note { font: 14px Inter, Arial, sans-serif; fill: #333333; }
    </style>
  </defs>

  <!-- Startup note -->
  <text x="600" y="40" text-anchor="middle" class="note">Startup: DB readiness → Alembic migrations → Seed default admin → Instrumentation</text>

  <!-- Client -->
  <rect class="box" x="60" y="120" width="200" height="80" />
  <text class="title" x="160" y="165" text-anchor="middle">Client (Web/Mobile)</text>

  <!-- API Gateway -->
  <rect class="box" x="320" y="120" width="220" height="80" />
  <text class="title" x="430" y="165" text-anchor="middle">API Gateway</text>

  <!-- Identity Service -->
  <rect class="box" x="600" y="100" width="260" height="120" fill="#e3f2fd" />
  <text class="title" x="730" y="130" text-anchor="middle">Identity Service</text>
  <text class="label" x="610" y="155">• Register</text>
  <text class="label" x="610" y="175">• Login / Token</text>
  <text class="label" x="610" y="195">• Refresh</text>
  <text class="label" x="610" y="215">• Health</text>

  <!-- Postgres DB -->
  <rect class="box" x="910" y="100" width="230" height="120" fill="#fff3e0" />
  <text class="title" x="1025" y="130" text-anchor="middle">Postgres (identity-db)</text>
  <text class="label" x="920" y="155">• SQLAlchemy runtime</text>
  <text class="label" x="920" y="175">• Alembic migrations</text>

  <!-- Jaeger / OTLP -->
  <rect class="box" x="650" y="320" width="220" height="80" fill="#e8f5e9" />
  <text class="title" x="760" y="365" text-anchor="middle">Jaeger / OTLP Traces</text>

  <!-- Arrows: Client -> Gateway -->
  <line x1="260" y1="160" x2="320" y2="160" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrow)" />
  <text class="label" x="290" y="145" text-anchor="middle">/api/v1/*</text>

  <!-- Arrows: Gateway -> Identity -->
  <line x1="540" y1="160" x2="600" y2="160" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrow)" />
  <text class="label" x="570" y="145" text-anchor="middle">auth routes</text>

  <!-- Arrows: Identity -> DB -->
  <line x1="860" y1="160" x2="910" y2="160" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrow)" />
  <text class="label" x="885" y="145" text-anchor="middle">SQL</text>

  <!-- Arrow: Identity -> OTLP -->
  <line x1="730" y1="220" x2="760" y2="320" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrow)" />
  <text class="label" x="760" y="285" text-anchor="middle">traces</text>

  <!-- Endpoint labels -->
  <text class="label" x="380" y="210">/api/v1/auth/register</text>
  <text class="label" x="380" y="230">/api/v1/auth/token</text>
  <text class="label" x="380" y="250">/api/v1/auth/refresh</text>
  <text class="label" x="380" y="270">/api/v1/healthz</text>
</svg>
